{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/rdp/Desktop/apireyes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/rdp/Desktop/apireyes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\rdp\\\\Desktop\\\\apireyes\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from'axios';import{toast}from'react-toastify';import{useReducer}from'react';import getListReducers from'./getListReducers';import{GET_LIST,LOADING_STARTS,LOADING_STOPS}from'./feedbackTypes';var useGetList=function useGetList(){var _useReducer=useReducer(getListReducers,{items:[],isLoading:false}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],items=_useReducer2$.items,isLoading=_useReducer2$.isLoading,dispatch=_useReducer2[1];var getList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(data){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:LOADING_STARTS});_context.prev=1;_context.next=4;return axios.post('https://share-point-tt.herokuapp.com/api/loginDetails/all',data);case 4:response=_context.sent;if(response.data){console.log(response.data.data);toast.info('Success');dispatch({type:GET_LIST,payload:{items:response.data.data}});}_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);toast.info('Something went wrong!');if(_context.t0.response){dispatch({type:LOADING_STOPS});}case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function getList(_x){return _ref.apply(this,arguments);};}();var deleteList=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:LOADING_STARTS});_context2.prev=1;_context2.next=4;return axios.delete('https://share-point-tt.herokuapp.com/api/loginDetails'.concat(\"/\",id));case 4:response=_context2.sent;if(response.data){toast.success('Delete Successful');setTimeout(function(){window.location.reload();},1000);}_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);toast.info('Something went wrong!');dispatch({type:LOADING_STOPS});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function deleteList(_x2){return _ref2.apply(this,arguments);};}();return{getList:getList,deleteList:deleteList,items:items,isLoading:isLoading};};export default useGetList;","map":{"version":3,"sources":["C:/Users/rdp/Desktop/apireyes/src/api/useGetList.js"],"names":["axios","toast","useReducer","getListReducers","GET_LIST","LOADING_STARTS","LOADING_STOPS","useGetList","items","isLoading","dispatch","getList","data","type","post","response","console","log","info","payload","deleteList","id","delete","success","setTimeout","window","location","reload"],"mappings":"qWAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,UAAT,KAA2B,OAA3B,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,OAASC,QAAT,CAAmBC,cAAnB,CAAmCC,aAAnC,KAAwD,iBAAxD,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,gBAA0CL,UAAU,CAACC,eAAD,CAAkB,CACpEK,KAAK,CAAE,EAD6D,CAEpEC,SAAS,CAAE,KAFyD,CAAlB,CAApD,0EAAUD,KAAV,eAAUA,KAAV,CAAiBC,SAAjB,eAAiBA,SAAjB,CAA8BC,QAA9B,iBAKA,GAAMC,CAAAA,OAAO,0FAAG,iBAAOC,IAAP,+HACdF,QAAQ,CAAC,CAAEG,IAAI,CAAER,cAAR,CAAD,CAAR,CADc,sCAGWL,CAAAA,KAAK,CAACc,IAAN,CAAc,2DAAd,CAA4EF,IAA5E,CAHX,QAGNG,QAHM,eAIZ,GAAIA,QAAQ,CAACH,IAAb,CAAmB,CACjBI,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACH,IAAT,CAAcA,IAA1B,EACAX,KAAK,CAACiB,IAAN,CAAW,SAAX,EACAR,QAAQ,CAAC,CACPG,IAAI,CAAET,QADC,CAEPe,OAAO,CAAE,CACPX,KAAK,CAAEO,QAAQ,CAACH,IAAT,CAAcA,IADd,CAFF,CAAD,CAAR,CAOD,CAdW,+EAgBZX,KAAK,CAACiB,IAAN,CAAW,uBAAX,EACA,GAAI,YAAEH,QAAN,CAAgB,CACdL,QAAQ,CAAC,CAAEG,IAAI,CAAEP,aAAR,CAAD,CAAR,CACD,CAnBW,oEAAH,kBAAPK,CAAAA,OAAO,4CAAb,CAuBA,GAAMS,CAAAA,UAAU,2FAAG,kBAAOC,EAAP,mIACjBX,QAAQ,CAAC,CAAEG,IAAI,CAAER,cAAR,CAAD,CAAR,CADiB,wCAGQL,CAAAA,KAAK,CAACsB,MAAN,CAAgB,uDAAhB,YAA2ED,EAA3E,EAHR,QAGTN,QAHS,gBAIf,GAAIA,QAAQ,CAACH,IAAb,CAAmB,CACjBX,KAAK,CAACsB,OAAN,CAAc,mBAAd,EACAC,UAAU,CAAC,UAAM,CACfC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACD,CAFS,CAEP,IAFO,CAAV,CAGD,CATc,mFAWf1B,KAAK,CAACiB,IAAN,CAAW,uBAAX,EACAR,QAAQ,CAAC,CAAEG,IAAI,CAAEP,aAAR,CAAD,CAAR,CAZe,sEAAH,kBAAVc,CAAAA,UAAU,8CAAhB,CAgBA,MAAO,CAAET,OAAO,CAAPA,OAAF,CAAWS,UAAU,CAAVA,UAAX,CAAwBZ,KAAK,CAALA,KAAxB,CAA+BC,SAAS,CAATA,SAA/B,CAAP,CACD,CA9CD,CAgDA,cAAeF,CAAAA,UAAf","sourcesContent":["import axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport { useReducer } from 'react';\r\nimport getListReducers from './getListReducers';\r\nimport { GET_LIST, LOADING_STARTS, LOADING_STOPS } from './feedbackTypes';\r\n\r\nconst useGetList = () => {\r\n  const [{  items, isLoading }, dispatch] = useReducer(getListReducers, {\r\n    items: [],\r\n    isLoading: false,\r\n  });\r\n\r\n  const getList = async (data) => {\r\n    dispatch({ type: LOADING_STARTS });\r\n    try {\r\n      const response = await axios.post(`${'https://share-point-tt.herokuapp.com/api/loginDetails/all'}`,data);\r\n      if (response.data) {\r\n        console.log(response.data.data);\r\n        toast.info('Success');\r\n        dispatch({\r\n          type: GET_LIST,\r\n          payload: {\r\n            items: response.data.data,\r\n    \r\n          },\r\n        });\r\n      }\r\n    } catch (e) {\r\n      toast.info('Something went wrong!');\r\n      if (e.response) {\r\n        dispatch({ type: LOADING_STOPS });\r\n      }\r\n    }\r\n  };\r\n\r\n  const deleteList = async (id) => {\r\n    dispatch({ type: LOADING_STARTS });\r\n    try {\r\n      const response = await axios.delete(`${'https://share-point-tt.herokuapp.com/api/loginDetails'}/${id}`);\r\n      if (response.data) {\r\n        toast.success('Delete Successful');\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 1000);\r\n      }\r\n    } catch (e) {\r\n      toast.info('Something went wrong!');\r\n      dispatch({ type: LOADING_STOPS });\r\n    }\r\n  };\r\n\r\n  return { getList, deleteList,  items, isLoading };\r\n};\r\n\r\nexport default useGetList;\r\n"]},"metadata":{},"sourceType":"module"}